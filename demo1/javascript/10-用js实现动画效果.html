<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>动画效果</title>
    <style>
        #slideshow {
            width: 300px;
            height:400px;
            position: relative;
            overflow: hidden;
        }

    </style>
</head>
<body>
<!--<p id="message">&lt;!&ndash;onclick="positionMessage()"&ndash;&gt;Whee!</p>
<p id="message2">whoa!</p>-->

<h1>Web Design</h1>
<p>These are the things you should know.</p>
<ol id="linklist">
    <li>
        <a href="">Structure</a>
    </li>
    <li>
        <a href="">Presentation</a>
    </li>
    <li>
        <a href="">Behavior</a>
    </li>
</ol>
<div id="slideshow">
    <img src="../images/anye1.jpg" alt="building blocks of web design" id="preview" />
</div>
<script>
    function addLoadEvent(func){
        var oldonload = window.onload;  //定义一个变量把window.onload赋值给oldonload
        if (typeof window.onload != 'function'){  //用typeof判断是不是通过window调用函数－如果没有就执行下面的
            window.onload = func;
        } else {    //调用了
            window.onload = function(){ //?
                oldonload();
                func();
            }
        }
    }
    function prepareSlideshow(){
        if(!document.getElementsByTagName)return false;
        if(!document.getElementById)return false;
        if(!document.getElementById("linklist"))return false;
        if(!document.getElementById("preview"))return false;
        //为图片应用样式
        var preview = document.getElementById("preview");
        preview.style.position = "absolute";
        //取得列表中的所有链接
        var list = document.getElementById("linklist");
        /*var slideshow = document.createElement("div");
        slideshow.setAttribute("id","slideshow");
        var preview = dpcument.createElement("img");
        preview.setAttribute("src","image/topics.gif");
        preview.setAttribute("alt","building blocks of web design");
        preview.setAttribute("id","preview");
        slideshow.appendChild(preview);*/
        var links = list.getElementsByTagName("a");
        links[0].onmouseover = function() {
            moveElement("preview",-200,0,100);
        }
        links[1].onmouseover = function() {
            moveElement("preview",-400,0,100);
        }
        links[2].onmouseover = function() {
            moveElement("preview",-600,0,100);
        }


    }
addLoadEvent(prepareSlideshow);
    function moveElement(elementID,final_x,final_y,interval) {
        if (!document.getElementById) return false;
        if (!document.getElementById(elementID)) return false;
        var elem = document.getElementById(elementID);
        if (elem.movement) {
            clearTimeout(elem.movement);
        }
        if(!elem.style.left) {
            elem.style.left = "0px";
        }
        if(!elem.style.top) {
            elem.style.top = "0px";
        }
        var xpos = parseInt(elem.style.left);
        var ypos = parseInt(elem.style.top);
        var dist = 0;
        if (xpos == final_x && ypos == final_y){
            return true;
        }
        if (xpos < final_x) {
            /*xpos++;*/
            dist = Math.ceil((final_x - xpos)/10);
            xpos = xpos + dist;
        }
        if (xpos > final_x) {
            /*xpos--;*/
            dist = Math.ceil((xpos - final_x)/10);
            xpos = xpos - dist;
        }
        if (ypos < final_y) {
            /*ypos++;*/
            dist = Math.ceil((fina_y - ypos)/10);
            ypos = ypos + dist;
        }
        if (ypos > final_y) {
            /*ypos--;*/
            dist = Math.ceil((ypos - fina_y)/10);
            ypos = ypos - dist;
        }
        elem.style.left = xpos + "px";
        elem.style.top = ypos + "px";
        var repeat = "moveElement('"+elementID+"',"+final_x+","+final_y+","+interval+")";
        var movement = setTimeout(repeat,interval);
    }
   /* <p id="message"><!--onclick="positionMessage()"-->Whee!</p>*/
    /*function positionMessage(){
        if (!document.getElementById) return false;
        if (!document.getElementById("message")) return false;
        var elem = document.getElementById("message");
        elem.style.position = "absolute";
        elem.style.left = "50px";
        elem.style.top = "100px";
        moveElement("message",125,25,20);
        if (!document.getElementById("message2")) return false;
        var elem = document.getElementById("message2");
        elem.style.position = "absolute";
        elem.style.left = "50px";
        elem.style.top = "50px";
        moveElement("message",125,125,20);
    }
    addLoadEvent(positionMessage);

    function moveElement(elementID,final_x,final_y,interval) {
        if (!document.getElementById) return false;
        if (!document.getElementById(elementID)) return false;
        var elem = document.getElementById(elementID);
        var xpos = parseInt(elem.style.left);
        var ypos = parseInt(elem.style.top);
        if (xpos == final_x && ypos == final_y){
            return true;
        }
        if (xpos < final_x) {
            xpos++;
        }
        if (xpos > final_x) {
            xpos--;
        }
        if (ypos < final_y) {
            ypos++;
        }
        if (ypos > final_y) {
            ypos--;
        }
        elem.style.left = xpos + "px";
        elem.style.top = ypos + "px";
        var repeat = "moveElement('"+elementID+"',"+final_x+","+final_y+","+interval+")";
        movement = setTimeout(repeat,interval);
    }*/


    /*function moveMessage() {
     if(!document.getElementById) return false;
     if(!document.getElementById("message")) return false;
     var elem = document.getElementById("message");
     var xpos = parseInt(elem.style.left);
     var ypos = parseInt(elem.style.top);
     if(xpos == 200 && ypos == 100) {
     return true;
     }
     if (xpos < 200) {
     xpos++;
     }
     if (xpos > 200) {
     xpos--;
     }
     if (ypos < 100) {
     xpos++;
     }
     if (ypos > 100) {
     xpos--;
     }
     elem.style.left = xpos + "px";
     elem.style.top = ypos + "px";
     movement = setTimeout("moveMessage()",10);
     }*/
    //时间
    /*
    * setTimeout("function",interval) //两个参数 方法和间隔
    * clearTimeout(varioble) //可取消由 setTimeout()方法设置的timeout
    *
    * */
</script>
</body>
</html>